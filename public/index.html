<html>
    <head>
     
        <title></title>
        <script src="/socket.io/socket.io.js"></script>
        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
     
    </head>
    <body>
        <b>Send message</b><p>
        Message  <input type="text" id="msgbox"/>
        <br>
        <span id="msgs"></span>
     
        <script type="text/javascript">
            var Request = function()
            {
                this.getParameter = function( name )
                {
                    var rtnval = '';
                    var nowAddress = unescape(location.href);
                    var parameters = (nowAddress.slice(nowAddress.indexOf('?')+1,nowAddress.length)).split('&');

                    for(var i = 0 ; i < parameters.length ; i++)
                    {
                        var varName = parameters[i].split('=')[0];
                        if(varName.toUpperCase() == name.toUpperCase())
                        {
                            rtnval = parameters[i].split('=')[1];
                            break;
                        }
                    }
                    return rtnval;
                }
            }
            var request = new Request();

            var uid = request.getParameter('uid') ;
            var socket = io.connect('http://localhost:8080');
            $("#msgbox").keyup(function(event) {
                if (event.which == 13) {
                    socket.emit('fromclient',{uid:uid,msg:$('#msgbox').val()});
                    $('#msgbox').val('');
                }
            });
            socket.on('toclient',function(data){
                console.log(data.msg);
                $('#msgs').append(data.uid + " : " +data.msg+'<BR>');
            });
        </script>
    </body>
</html>
    